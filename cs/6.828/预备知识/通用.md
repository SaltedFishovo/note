# 预备知识

#### ELF



#### 页表

一个虚拟地址空间可以被看作为一个有序的虚拟页面的数组，一个n位的虚拟地址（Virtual Adderss）被分为两部分:**虚拟页号（Virtual Page Nubmer）、虚拟页面偏移（Virtual page offest）**，假设程序访问了一个VA,则VPN指示了该页面的序号，VPO指示了要访问的数据字在该页面内以字节为单位的页号。

页表（Page Table）是一个页表条目（Page Table Entry）的数组，这个数组通过VPN来索引，每一个VP正好对应了一个PTE。PTE指示了该这个VP的位置，是存在于磁盘中，还是位于物理内存中的某个物理页（Physcial Page），并且PTE中还存放了一些其他的标志位。例如指示该页面是否可读、可写等。

页表可以存在于物理内存中， *CR3* 寄存器存放页表的物理地址。当CPU产生一个虚拟地址时，这个虚拟地址被送入MMU，MMU从CR3取出页表的物理基地址，再加上VPN，得出该页面PTE的物理地址，然后从内存取出这个PTE，随后对该虚拟页面映射的物理页进行访问。

假设一页为4KB，即4096Bytes，1024=2^10，1024 \* 4 = 4096 = 2 ^10 \* 2^2 = 2^12，即一页的范围为000H~FFFH，虚拟页面偏移为12bit。



#### 作业

作业（job）：一条命令行语句求值而创建的进程，是unix shell对此的一个抽象。

进程组（Process z）：**shell为每个作业创建一个进程组**，进程组具有一个ID，可通过ID来对进程组操作。

- 一条命令行语句可能创建多个进程，这些进程同属于一个作业。
- 任意时刻可以至多有一个前台作业，若干个后台作业。
- ctrl+c（终止）、ctrl+z（挂起）会向前台进程组每个进程发送信号。

#### 信号

发送信号：向某个进程发送信号，就是更新该进程上下文的某个状态。

发送信号有两个原因：

- 内核检测到某种个事件发生：除0、子进程终止。
- 进程调用kill函数显示发送。

接收信号：在上下文切换时，内核还在执行其指令，会调用一个函数去检测要切换到的进程上下文的信号字段，如果存在未阻塞、未处理的信号，则做出相应的处理。

#### 如何设置Segment、Sections的对齐属性

#### 汇编C交叉调用

#### 保护模式寻址

#### GDT

